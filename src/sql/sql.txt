CREATE DATABASE ticketing_system;

CREATE TABLE roles (
    role_id INT PRIMARY KEY,
    role_name VARCHAR(255),
    created_on TIMESTAMP,
    created_by INT,
    updated_on TIMESTAMP,
    updated_by INT
);

CREATE TABLE department (
    department_id INT PRIMARY KEY,
    department_name VARCHAR(255),
    department_description VARCHAR(255),
    department_director INT,
    created_on TIMESTAMP,
    created_by INT,
    updated_on TIMESTAMP,
    updated_by INT
    -- FOREIGN KEY (department_director) REFERENCES users(user_id)
);

CREATE TABLE positions (
    position_id INT PRIMARY KEY,
    position_name VARCHAR(255),
    department_id INT,
    created_on TIMESTAMP,
    created_by INT,
    updated_on TIMESTAMP,
    updated_by INT,
    FOREIGN KEY (department_id) REFERENCES department(department_id)
);

CREATE TABLE users (
    user_id INT PRIMARY KEY,
    first_name VARCHAR(100),
    surname VARCHAR(100),
    password VARCHAR(100),
    position_id INT,
    role_id INT,
    created_on TIMESTAMP,
    created_by INT,
    updated_on TIMESTAMP,
    updated_by INT,
    FOREIGN KEY (position_id) REFERENCES positions(position_id),
    FOREIGN KEY (role_id) REFERENCES roles(role_id)
);

CREATE TABLE tickets (
    ticket_id INT auto_increment PRIMARY KEY,
    ticket_name VARCHAR(255),
    description VARCHAR(2555),
    tags VARCHAR(2555),
    priority_level VARCHAR(255),
    user_id INT,
    subtasks VARCHAR(1000),
    attachments MEDIUMTEXT,
    deadline_date TIMESTAMP,
    created_on TIMESTAMP,
    created_by INT,
    updated_on TIMESTAMP,
    updated_by INT,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);
